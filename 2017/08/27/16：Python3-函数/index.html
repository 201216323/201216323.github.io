<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>16：Python3 函数 | 常灿光个人博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">16：Python3 函数</h1><a id="logo" href="/.">常灿光个人博客</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">16：Python3 函数</h1><div class="post-meta">Aug 27, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>函数是组织好的，可重复使用的，用来实现单一或者相关联功能的代码段。</p>
<p>函数能提高应用的模块性和代码的重复利用率，Python提供了许多内建函数，比如print()，但也可以自己创建函数，这被叫做用户自定义函数。</p>
<p><strong>定义一个函数</strong></p>
<p>你可以定义一个由自己想要功能的函数，以下是简单的规则：</p>
<ul>
<li>函数代码块以def关键字开头，后接函数标识符名称和圆括号()。</li>
<li>任何传入参数和自变量必须放在圆括号中间，圆括号之间可以用于定义参数。</li>
<li>函数的第一行语句可以选择性的使用文档字符串—-用于存放函数说明。</li>
<li>函数内容以冒号开始，并且缩进。</li>
<li>return[表达式]结束函数，选择性地返回一个值给调用方，不带表达式的return相当于返回None。</li>
</ul>
<p><strong>语法</strong><br>Python 定义函数使用 def 关键字，一般格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def 函数名（参数列表）:</div><div class="line">    函数体</div></pre></td></tr></table></figure>
<p>默认情况下，参数值和参数名称是按函数声明中定义的的顺序匹配起来的。</p>
<p><strong>实例</strong></p>
<p>让我们使用函数来输出”Hello World！”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def hello() :</div><div class="line">   print(&quot;Hello World!&quot;)</div><div class="line"></div><div class="line">   </div><div class="line">&gt;&gt;&gt; hello()</div><div class="line">Hello World!</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>更复杂点的应用，函数中带上参数变量:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"></div><div class="line"># 计算面积函数</div><div class="line">def area(width, height):</div><div class="line">    return width * height</div><div class="line"> </div><div class="line">def print_welcome(name):</div><div class="line">    print(&quot;Welcome&quot;, name)</div><div class="line"></div><div class="line">print_welcome(&quot;Runoob&quot;)</div><div class="line">w = 4</div><div class="line">h = 5</div><div class="line">print(&quot;width =&quot;, w, &quot; height =&quot;, h, &quot; area =&quot;, area(w, h))</div></pre></td></tr></table></figure>
<p><strong>函数调用</strong></p>
<p>定义一个函数：给了函数一个名称，指定了函数里包含的参数，和代码块结构。</p>
<p>这个函数的基本结构完成以后，你可以通过另一个函数调用执行，也可以直接从 Python 命令提示符执行。</p>
<p>如下实例调用了 printme() 函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"></div><div class="line"># 定义函数</div><div class="line">def printme(str):</div><div class="line"></div><div class="line">    print(str); #打印任何传入的字符串</div><div class="line">    return;</div><div class="line"></div><div class="line"></div><div class="line"># 调用函数</div><div class="line">printme(&quot;我要调用用户自定义函数!&quot;);</div><div class="line">printme(&quot;再次调用同一函数&quot;);</div></pre></td></tr></table></figure>
<p>以上实例输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">我要调用用户自定义函数!</div><div class="line">再次调用同一函数</div></pre></td></tr></table></figure>
<p><strong>参数传递</strong></p>
<p>在 python 中，类型属于对象，变量是没有类型的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">a=[1,2,3]</div><div class="line"></div><div class="line">a=&quot;Runoob&quot;</div></pre></td></tr></table></figure>
<p>以上代码中，[1,2,3] 是 List 类型，”Runoob” 是 String 类型，而变量 a 是没有类型，她仅仅是一个对象的引用（一个指针），可以是 List 类型对象，也可以指向 String 类型对象。</p>
<p><strong>可更改(mutable)与不可更改(immutable)对象</strong></p>
<p>在 python 中，strings, tuples, 和 numbers 是不可更改的对象，而 list,dict 等则是可以修改的对象。</p>
<ul>
<li>不可变类型：变量赋值 a=5 后再赋值 a=10，这里实际是新生成一个 int 值对象 10，再让a指向它，而5被丢弃，不是改变a的值，相当于新生成了a。</li>
<li>可变类型：变量赋值 la=[1,2,3,4] 后再赋值 la[2]=5 则是将 list la 的第三个元素值更改，本身la没有动，只是其内部的一部分值被修改了。</li>
</ul>
<p>python 函数的参数传递：</p>
<ul>
<li>不可变类型：类似c++的值传递，如整数、字符串、元组。如fun（a），传递的只是a的值，没有影响a对象本身。比如在fun（a）内部修改a的值，只是修改另一个复制的对象，不会影响 a 本身。</li>
<li>可变类型：类似 c++的引用传递，如列表，字典。如fun（la），则是将la真正的值传过去，修改后fun外部的la也会受影响</li>
</ul>
<p><strong>python 传不可变对象实例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">def ChangeInt( a ):</div><div class="line">    a = 10</div><div class="line"></div><div class="line">b = 2</div><div class="line">ChangeInt(b)</div><div class="line">print( b ) # 结果是 2</div></pre></td></tr></table></figure>
<p>实例中有 int 对象2，指向它的变量是b，在传递给ChangeInt函数时，按传值的方式复制了变量b，a和b都指向了同一个Int对象，在a=10时，则新生成一个 int 值对象 10，并让 a 指向它。</p>
<p><strong>传可变对象实例</strong></p>
<p>可变对象在函数里修改了参数，那么在调用这个函数的函数里，原始的参数也被改变了。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line"># 可写函数说明</div><div class="line">def changeme( mylist ):</div><div class="line">   &quot;修改传入的列表&quot;</div><div class="line">   mylist.append([1,2,3,4]);</div><div class="line">   print (&quot;函数内取值: &quot;, mylist)</div><div class="line">   return</div><div class="line"> </div><div class="line"># 调用changeme函数</div><div class="line">mylist = [10,20,30];</div><div class="line">changeme( mylist );</div><div class="line">print (&quot;函数外取值: &quot;, mylist)</div></pre></td></tr></table></figure>
<p>传入函数的和在末尾添加新内容的对象用的是同一个引用。故输出结果如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">函数内取值:  [10, 20, 30, [1, 2, 3, 4]]</div><div class="line">函数外取值:  [10, 20, 30, [1, 2, 3, 4]]</div></pre></td></tr></table></figure></p>
<p><strong>参数</strong><br>以下是调用函数时可使用的正式参数类型：</p>
<ul>
<li>必需参数</li>
<li>关键字参数</li>
<li>默认参数</li>
<li>不定长参数</li>
</ul>
<p><strong>必需参数</strong></p>
<p>必需参数须以正确的顺序传入函数。调用时的数量必须和声明时的一样。</p>
<p>调用printme()函数，你必须传入一个参数，不然会出现语法错误：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">#可写函数说明</div><div class="line">def printme( str ):</div><div class="line">   &quot;打印任何传入的字符串&quot;</div><div class="line">   print (str);</div><div class="line">   return;</div><div class="line"> </div><div class="line">#调用printme函数</div><div class="line">printme();</div></pre></td></tr></table></figure>
<p>以上实例输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;test.py&quot;, line 10, in &lt;module&gt;</div><div class="line">    printme();</div><div class="line">TypeError: printme() missing 1 required positional argument: &apos;str&apos;</div></pre></td></tr></table></figure>
<p><strong>关键字参数</strong></p>
<p>关键字参数和函数调用关系紧密，，函数调用使用关键字参数来确定传入的参数值。</p>
<p>使用关键字参数允许函数调用时参数的顺序与声明不一致，因为Python解释器能够用参数名匹配参数值，以下实例在函数printme()调用时使用参数名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">#可写函数说明</div><div class="line">def printme( str ):</div><div class="line">   &quot;打印任何传入的字符串&quot;</div><div class="line">   print (str);</div><div class="line">   return;</div><div class="line"> </div><div class="line">#调用printme函数</div><div class="line">printme( str = &quot;菜鸟教程&quot;);</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">菜鸟教程</div></pre></td></tr></table></figure></p>
<p>以下实例中演示了函数参数的使用不需要使用指定顺序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">#可写函数说明</div><div class="line">def printinfo( name, age ):</div><div class="line">   &quot;打印任何传入的字符串&quot;</div><div class="line">   print (&quot;名字: &quot;, name);</div><div class="line">   print (&quot;年龄: &quot;, age);</div><div class="line">   return;</div><div class="line"> </div><div class="line">#调用printinfo函数</div><div class="line">printinfo( age=50, name=&quot;runoob&quot; );</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">名字:  runoob</div><div class="line">年龄:  50</div></pre></td></tr></table></figure></p>
<p><strong>默认参数</strong></p>
<p>调用函数时，如果没有传递参数，则会使用默认参数。以下实例中如果没有传入 age 参数，则使用默认值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">#可写函数说明</div><div class="line">def printinfo( name, age = 35 ):</div><div class="line">   &quot;打印任何传入的字符串&quot;</div><div class="line">   print (&quot;名字: &quot;, name);</div><div class="line">   print (&quot;年龄: &quot;, age);</div><div class="line">   return;</div><div class="line"> </div><div class="line">#调用printinfo函数</div><div class="line">printinfo( age=50, name=&quot;runoob&quot; );</div><div class="line">print (&quot;------------------------&quot;)</div><div class="line">printinfo( name=&quot;runoob&quot; );</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">名字:  runoob</div><div class="line">年龄:  50</div><div class="line">------------------------</div><div class="line">名字:  runoob</div><div class="line">年龄:  35</div></pre></td></tr></table></figure></p>
<p><strong>不定长参数</strong><br>你可能需要一个函数能处理比当初声明时更多的参数。这些参数叫做不定长参数，和上述2种参数不同，声明时不会命名。基本语法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def functionname([formal_args,] *var_args_tuple ):</div><div class="line">   &quot;函数_文档字符串&quot;</div><div class="line">   function_suite</div><div class="line">   return [expression]</div></pre></td></tr></table></figure>
<p>加了星号（*）的变量名会存放所有未命名的变量参数。如果在函数调用时没有指定参数，它就是一个空元组。我们也可以不向函数传递未命名的变量。如下实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line"># 可写函数说明</div><div class="line">def printinfo( arg1, *vartuple ):</div><div class="line">   &quot;打印任何传入的参数&quot;</div><div class="line">   print (&quot;输出: &quot;)</div><div class="line">   print (arg1)</div><div class="line">   for var in vartuple:</div><div class="line">      print (var)</div><div class="line">   return;</div><div class="line"> </div><div class="line"># 调用printinfo 函数</div><div class="line">printinfo( 10 );</div><div class="line">printinfo( 70, 60, 50 );</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">输出:</div><div class="line">10</div><div class="line">输出:</div><div class="line">70</div><div class="line">60</div><div class="line">50</div></pre></td></tr></table></figure></p>
<p><strong>匿名函数</strong></p>
<p>python 使用 lambda 来创建匿名函数。</p>
<p>所谓匿名，意即不再使用 def 语句这样标准的形式定义一个函数。</p>
<ul>
<li>lambda 只是一个表达式，函数体比 def 简单很多。</li>
<li>lambda的主体是一个表达式，而不是一个代码块。仅仅能在lambda表达式中封装有限的逻辑进去。</li>
<li>lambda 函数拥有自己的命名空间，且不能访问自有参数列表之外或全局命名空间里的参数。</li>
<li>虽然lambda函数看起来只能写一行，却不等同于C或C++的内联函数，后者的目的是调用小函数时不占用栈内存从而增加运行效率。</li>
</ul>
<p><strong>语法</strong></p>
<p>lambda 函数的语法只包含一个语句，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lambda [arg1 [,arg2,.....argn]]:expression</div></pre></td></tr></table></figure>
<p>如下实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line"># 可写函数说明</div><div class="line">sum = lambda arg1, arg2: arg1 + arg2;</div><div class="line"> </div><div class="line"># 调用sum函数</div><div class="line">print (&quot;相加后的值为 : &quot;, sum( 10, 20 ))</div><div class="line">print (&quot;相加后的值为 : &quot;, sum( 20, 20 ))</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">相加后的值为 :  30</div><div class="line">相加后的值为 :  40</div></pre></td></tr></table></figure></p>
<p><strong>return语句</strong></p>
<p>return [表达式] 语句用于退出函数，选择性地向调用方返回一个表达式。不带参数值的return语句返回None。之前的例子都没有示范如何返回数值，以下实例演示了 return 语句的用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"></div><div class="line"># 可写函数说明</div><div class="line">def sum( arg1, arg2 ):</div><div class="line">   # 返回2个参数的和.&quot;</div><div class="line">   total = arg1 + arg2</div><div class="line">   print (&quot;函数内 : &quot;, total)</div><div class="line">   return total;</div><div class="line"></div><div class="line"># 调用sum函数</div><div class="line">total = sum( 10, 20 );</div><div class="line">print (&quot;函数外 : &quot;, total)</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">函数内 :  30</div><div class="line">函数外 :  30</div></pre></td></tr></table></figure></p>
<p><strong>变量作用域</strong></p>
<p>Python 中，程序的变量并不是在哪个位置都可以访问的，访问权限决定于这个变量是在哪里赋值的。</p>
<p>变量的作用域决定了在哪一部分程序可以访问哪个特定的变量名称。Python的作用域一共有4中，分别是：</p>
<ul>
<li>L （Local） 局部作用域</li>
<li>E （Enclosing） 闭包函数外的函数中</li>
<li>G （Global） 全局作用域</li>
<li>B （Built-in） 内建作用域</li>
</ul>
<p>以 L –&gt; E –&gt; G –&gt;B的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">x = int(2.9)  # 内建作用域</div><div class="line"> </div><div class="line">g_count = 0  # 全局作用域</div><div class="line">def outer():</div><div class="line">    o_count = 1  # 闭包函数外的函数中</div><div class="line">    def inner():</div><div class="line">        i_count = 2  # 局部作用域</div></pre></td></tr></table></figure>
<p>Python 中只有模块（module），类（class）以及函数（def、lambda）才会引入新的作用域，其它的代码块（如if/elif/else/、try/except、for/while等）是不会引入新的作用域的，也就是说这这些语句内定义的变量，外部也可以访问，如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; if True:</div><div class="line">...  msg = &apos;I am from Runoob&apos;</div><div class="line">... </div><div class="line">&gt;&gt;&gt; msg</div><div class="line">&apos;I am from Runoob&apos;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>实例中 msg 变量定义在 if 语句块中，但外部还是可以访问的。</p>
<p>如果将 msg 定义在函数中，则它就是局部变量，外部不能访问：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def test():</div><div class="line">...     msg_inner = &apos;I am from Runoob&apos;</div><div class="line">... </div><div class="line">&gt;&gt;&gt; msg_inner</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">NameError: name &apos;msg_inner&apos; is not defined</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<p>从报错的信息上看，说明了msg_inner未定义，无法使用，因为它是局部变量，只有在函数内可以使用。</p>
<p><strong>全局变量和局部变量</strong></p>
<p>定义在函数内部的变量拥有一个局部作用域，定义在函数外的拥有全局作用域。</p>
<p>局部变量只能在其被声明的函数内部访问，而全局变量可以在整个程序范围内访问。调用函数时，所有在函数内声明的变量名称都将被加入到作用域中。如下实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"></div><div class="line">total = 0; # 这是一个全局变量</div><div class="line"># 可写函数说明</div><div class="line">def sum( arg1, arg2 ):</div><div class="line">    #返回2个参数的和.&quot;</div><div class="line">    total = arg1 + arg2; # total在这里是局部变量.</div><div class="line">    print (&quot;函数内是局部变量 : &quot;, total)</div><div class="line">    return total;</div><div class="line"></div><div class="line">#调用sum函数</div><div class="line">sum( 10, 20 );</div><div class="line">print (&quot;函数外是全局变量 : &quot;, total)</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">函数内是局部变量 :  30</div><div class="line">函数外是全局变量 :  0</div></pre></td></tr></table></figure></p>
<p><strong>global 和 nonlocal关键字</strong></p>
<p>当内部作用域想修改外部作用域的变量时，就要用到global和nonlocal关键字了。</p>
<p>以下实例修改全局变量 num：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"></div><div class="line">num = 1</div><div class="line">def fun1():</div><div class="line">    global num  # 需要使用 global 关键字声明</div><div class="line">    print(num) </div><div class="line">    num = 123</div><div class="line">    print(num)</div><div class="line">fun1()</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">1</div><div class="line">123</div></pre></td></tr></table></figure></p>
<p>如果要修改嵌套作用域（enclosing作用域，外层非全局作用域）中的变量则需要nonlocal关键字了，如下实例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">def outer():</div><div class="line">    num = 10</div><div class="line">    def inner():</div><div class="line">        nonlocal num   # nonlocal关键字声明</div><div class="line">        num = 100</div><div class="line">        print(num)</div><div class="line">    inner()</div><div class="line">    print(num)</div><div class="line">outer()</div></pre></td></tr></table></figure>
<p>以上实例输出结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">100</div><div class="line">100</div></pre></td></tr></table></figure></p>
<p>另外有一种特殊情况，假设下面这段代码被运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/usr/bin/python3</div><div class="line"> </div><div class="line">a = 10</div><div class="line">def test():</div><div class="line">    a = a + 1</div><div class="line">    print(a)</div><div class="line">test()</div></pre></td></tr></table></figure>
<p>以上程序执行，报错信息如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;test.py&quot;, line 7, in &lt;module&gt;</div><div class="line">    test()</div><div class="line">  File &quot;test.py&quot;, line 5, in test</div><div class="line">    a = a + 1</div><div class="line">UnboundLocalError: local variable &apos;a&apos; referenced before assignment</div></pre></td></tr></table></figure></p>
<p>错误信息为局部作用域引用错误，因为test函数中的a使用的是局部，未定义，无法修改。</p>
<p><strong>笔记列表</strong></p>
<p>默认参数必须放在最后面，否则会报：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SyntaxError: non-default argument follows default argument</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 可写函数说明</div><div class="line">def printinfo( age=35,name):   # 默认参数不在最后，会报错</div><div class="line">    &quot;打印任何传入的字符串&quot;</div><div class="line">    print(&quot;名字: &quot;, name);</div><div class="line">    print(&quot;年龄: &quot;, age);</div><div class="line">    return;</div></pre></td></tr></table></figure>
<p>def(**kwargs) 把N个关键字参数转化为字典:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; def func(country,province,**kwargs):</div><div class="line">...     print(country,province,kwargs)</div><div class="line">... </div><div class="line">&gt;&gt;&gt; func(&quot;China&quot;,&quot;Sichuan&quot;,city = &quot;Chengdu&quot;, section = &quot;JingJiang&quot;)</div><div class="line">China Sichuan &#123;&apos;city&apos;: &apos;Chengdu&apos;, &apos;section&apos;: &apos;JingJiang&apos;&#125;</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://201216323.tech/2017/08/27/16：Python3-函数/" data-id="cj6ur3mmg00087csgyxn3jmr3" class="article-share-link">分享</a><div class="tags"><a href="/tags/Python/">Python</a></div><div class="post-nav"><a href="/2017/08/27/17：Python3-数据结构/" class="pre">17：Python3 数据结构</a><a href="/2017/08/27/15：Python3-迭代器与生成器/" class="next">15：Python3 迭代器与生成器</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://201216323.tech"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/27/17：Python3-数据结构/">17：Python3 数据结构</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/27/16：Python3-函数/">16：Python3 函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/27/15：Python3-迭代器与生成器/">15：Python3 迭代器与生成器</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/27/14：Python3-循环语句/">14：Python3 循环语句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/27/13：Python3-条件控制/">13：Python3 条件控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/12：Python3-编程第一步/">12：Python3 编程第一步</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/11：Python3-字典/">11：Python3 字典</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/10：Python3-元组/">10：Python3 元组</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/9：Python3-列表/">9：Python3 列表</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/24/8：Python3-字符串/">8：Python3 字符串</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">常灿光个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>