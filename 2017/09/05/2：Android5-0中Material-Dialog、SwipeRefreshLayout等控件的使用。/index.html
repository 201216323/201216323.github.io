<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title> 2：Android5.0中Material Dialog、SwipeRefreshLayout等控件的使用。 | 常灿光个人博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden"> 2：Android5.0中Material Dialog、SwipeRefreshLayout等控件的使用。</h1><a id="logo" href="/.">常灿光个人博客</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title"> 2：Android5.0中Material Dialog、SwipeRefreshLayout等控件的使用。</h1><div class="post-meta">Sep 5, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>前言：<br>上一篇Android 5.0的文章，小编仔细学习使用了TextInputLayout和Snackbar，不清楚的可以查看<a href="http://note.youdao.com/noteshare?id=832547f1f6b12fbfbeda7421e7e6017a" target="_blank" rel="external">原文链接</a>，这一篇文章中将会全部介绍5.0中其它比较常用的控件，下面是目录：</p>
<ol>
<li>Material Dialog</li>
<li>FloatingActionButton</li>
<li>SwipeRefreshLayout</li>
<li>LinearLayoutCompat</li>
<li>ListPopupWindow</li>
<li>PopupMenu</li>
<li>Toolbar</li>
<li>TabLayout(选项卡布局)</li>
<li>AppBarLayout（程序栏布局）&amp;&amp; CoordinatorLayout（协作布局）</li>
<li>CollapsingToolbarLayout（折叠工具栏布局）</li>
<li>NestedScrollView的使用</li>
</ol>
<h2 id="Material-Dialog"><a href="#Material-Dialog" class="headerlink" title="Material Dialog"></a>Material Dialog</h2><p>Dialog我们在开发中经常用到，但不经常使用V7包里面的Material 风格的对话框，建议以后使用这种Dialog，效果太酷了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> private void showMaterialDialog() &#123;</div><div class="line">        android.support.v7.app.AlertDialog.Builder builder = new AlertDialog.Builder(this);</div><div class="line">        builder.setMessage(&quot;我爱你 爱着你就像老鼠爱大米&quot;)</div><div class="line">                .setCancelable(false)</div><div class="line">                .setNegativeButton(&quot;取消&quot;, null)</div><div class="line">                .setPositiveButton(&quot;确定&quot;, null)</div><div class="line">                .setTitle(&quot;this is a Material Design Dialog&quot;)</div><div class="line">                .show();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://ww4.sinaimg.cn/mw690/b0d9a523jw1fa4el7pdnfg20be07lwh3.gif" alt="image"></p>
<h2 id="FloatingActionButton（悬浮的按钮）"><a href="#FloatingActionButton（悬浮的按钮）" class="headerlink" title="FloatingActionButton（悬浮的按钮）"></a>FloatingActionButton（悬浮的按钮）</h2><p>在android.support.design.widget包下面，可以使用FloatingActionButton来做悬浮按钮，虽然这种效果我们可以使用ImageView来实现，但谷歌给我们提供了做悬浮按钮的控件我们就不用再自己创造了，查看FloatingActionButton的源代码可以发现，此控件是继承自ImageView的，所以可是使用ImageView的一切属性，但它也有属于自己及的专有属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1. app:fabSize=&quot;normal&quot;设置大小，有两种赋值分别是 “mini” 和 “normal”，默认是“normal”</div><div class="line">2. app:borderWidth=&quot;10dp&quot;设置边框的宽度</div><div class="line">3. app:backgroundTint=&quot;@color/colorPrimary&quot;设置FloatingActionButton的背景颜色，默认的背景颜色是Theme主题中的&lt;item name=&quot;colorAccent&quot;&gt;#ff0000&lt;/item&gt;</div><div class="line">4. app:elevation=&quot;20dp&quot;设置FloatingActionButton阴影的深度</div></pre></td></tr></table></figure>
<p>效果如下：<br><img src="http://ww3.sinaimg.cn/mw690/b0d9a523jw1fa4flgfpb1g20bd07l75a.gif" alt="image"></p>
<p>布局文件如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;horizontal&quot;&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.FloatingActionButton</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_alignParentBottom=&quot;true&quot;</div><div class="line">        android:layout_alignParentRight=&quot;true&quot;</div><div class="line">        android:layout_margin=&quot;20dp&quot;</div><div class="line">        app:borderWidth=&quot;5dp&quot;</div><div class="line">        app:backgroundTintMode=&quot;src_in&quot;</div><div class="line">        app:backgroundTint=&quot;@color/colorPrimary&quot;</div><div class="line">        app:elevation=&quot;20dp&quot;</div><div class="line">        /&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.FloatingActionButton</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_alignParentBottom=&quot;true&quot;</div><div class="line">        android:layout_alignParentRight=&quot;true&quot;</div><div class="line">        android:layout_margin=&quot;20dp&quot;</div><div class="line">        app:fabSize=&quot;normal&quot;</div><div class="line">        app:borderWidth=&quot;10dp&quot;</div><div class="line">        app:elevation=&quot;20dp&quot;</div><div class="line">        /&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.FloatingActionButton</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_alignParentBottom=&quot;true&quot;</div><div class="line">        android:layout_alignParentRight=&quot;true&quot;</div><div class="line">        android:layout_margin=&quot;20dp&quot;</div><div class="line">        app:fabSize=&quot;mini&quot;</div><div class="line">        app:borderWidth=&quot;5dp&quot;</div><div class="line">        app:backgroundTintMode=&quot;src_in&quot;</div><div class="line">        app:backgroundTint=&quot;@color/colorPrimary&quot;</div><div class="line">        app:elevation=&quot;20dp&quot;</div><div class="line">        /&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<h2 id="SwipeRefreshLayout（下拉刷新）"><a href="#SwipeRefreshLayout（下拉刷新）" class="headerlink" title="SwipeRefreshLayout（下拉刷新）"></a>SwipeRefreshLayout（下拉刷新）</h2><p>SwipeRefreshLayout使用这种控件做出的刷新效果现在非常见，印象比较深的就是直播APP上，它是在android.support.v4.widget包下，SwipeRefreshLayout组件下必须包裹一个可滑动的组件才可实现下拉刷新效果。</p>
<p>布局代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;android.support.v4.widget.SwipeRefreshLayout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:id=&quot;@+id/swipeContainer&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;ScrollView</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;match_parent&quot;</div><div class="line">            android:orientation=&quot;vertical&quot;</div><div class="line">            &gt;</div><div class="line"></div><div class="line">            /*这里放多个TextView来测试*/</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line"></div><div class="line">    &lt;/ScrollView&gt;</div><div class="line"></div><div class="line">&lt;/android.support.v4.widget.SwipeRefreshLayout&gt;</div></pre></td></tr></table></figure>
<p>java程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">public class SwipeRefreshActivity extends AppCompatActivity implements SwipeRefreshLayout.OnRefreshListener &#123;</div><div class="line"></div><div class="line">    SwipeRefreshLayout swipeContainer;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_swiprefresh);</div><div class="line">        swipeContainer = (SwipeRefreshLayout) findViewById(R.id.swipeContainer);</div><div class="line">        //设置下拉刷新监听事件</div><div class="line">        swipeContainer.setOnRefreshListener(this);</div><div class="line">        //设置进度条的颜色</div><div class="line">        swipeContainer.setColorSchemeColors(Color.RED, Color.BLUE, Color.GREEN);</div><div class="line">        //设置圆形进度条大小</div><div class="line">        swipeContainer.setSize(SwipeRefreshLayout.DEFAULT);</div><div class="line">        //设置进度条背景颜色</div><div class="line">//        swipeContainer.setProgressBackgroundColorSchemeColor(Color.DKGRAY);</div><div class="line">        //设置下拉多少距离之后开始刷新数据</div><div class="line">//        swipeContainer.setDistanceToTriggerSync(50);</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public void onRefresh() &#123;</div><div class="line">        new Handler().postDelayed(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                Snackbar.make(swipeContainer, &quot;刷新结束&quot;, Snackbar.LENGTH_SHORT).show();</div><div class="line">                swipeContainer.setRefreshing(false);</div><div class="line">            &#125;</div><div class="line">        &#125;, 2000);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>SwipeRefreshLayout的一些常用的设置都写在代码中了，在不设置进度条颜色的时候默认是黑色的，SwipeRefreshLayout只有下拉刷新的功能，但在实际开发中还需要上拉加载功能，这都可以去Github上search 。</p>
<p>效果如下：<br><img src="http://ww1.sinaimg.cn/mw690/b0d9a523jw1fa4fv5y7xpg20aq0hrac7.gif" alt="image"></p>
<h2 id="LinearLayoutCompat"><a href="#LinearLayoutCompat" class="headerlink" title="LinearLayoutCompat"></a>LinearLayoutCompat</h2><p>V7包中有一个LinearLayoutCompat组件,可以给LinerLayout 中的子元素item之间设置分割线。</p>
<p>布局文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;!--divider必须放在drawable中才能生效--&gt;</div><div class="line">    &lt;android.support.v7.widget.LinearLayoutCompat</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:orientation=&quot;vertical&quot;</div><div class="line">        app:divider=&quot;@drawable/line&quot;</div><div class="line">        app:dividerPadding=&quot;10dp&quot;</div><div class="line">        app:showDividers=&quot;middle&quot;</div><div class="line">        &gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:background=&quot;#ffffff&quot;</div><div class="line">            android:gravity=&quot;center&quot;</div><div class="line">            android:padding=&quot;10dp&quot;</div><div class="line">            android:text=&quot;text&quot;</div><div class="line">            android:textAllCaps=&quot;false&quot;</div><div class="line">            android:textColor=&quot;@color/colorAccent&quot;</div><div class="line">            android:textSize=&quot;14sp&quot;/&gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:background=&quot;#ffffff&quot;</div><div class="line">            android:gravity=&quot;center&quot;</div><div class="line">            android:padding=&quot;10dp&quot;</div><div class="line">            android:text=&quot;text&quot;</div><div class="line">            android:textAllCaps=&quot;false&quot;</div><div class="line">            android:textColor=&quot;@color/colorAccent&quot;</div><div class="line">            android:textSize=&quot;14sp&quot;/&gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:background=&quot;#ffffff&quot;</div><div class="line">            android:gravity=&quot;center&quot;</div><div class="line">            android:padding=&quot;10dp&quot;</div><div class="line">            android:text=&quot;text&quot;</div><div class="line">            android:textAllCaps=&quot;false&quot;</div><div class="line">            android:textColor=&quot;@color/colorAccent&quot;</div><div class="line">            android:textSize=&quot;14sp&quot;/&gt;</div><div class="line"></div><div class="line">        &lt;TextView</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:background=&quot;#ffffff&quot;</div><div class="line">            android:gravity=&quot;center&quot;</div><div class="line">            android:padding=&quot;10dp&quot;</div><div class="line">            android:text=&quot;text&quot;</div><div class="line">            android:textAllCaps=&quot;false&quot;</div><div class="line">            android:textColor=&quot;@color/colorAccent&quot;</div><div class="line">            android:textSize=&quot;14sp&quot;/&gt;</div><div class="line">    &lt;/android.support.v7.widget.LinearLayoutCompat&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>LinearLayoutCompat控件有几个属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">1. app:divider=”@drawable/line” 给分隔线设置颜色，这里你需要在drawable在定义shape资源，否则将没有效果，不信的小伙伴can try。</div><div class="line">1. app:dividerPadding=”25dp” 给分隔线设置填充大小。</div><div class="line">1. app:showDividers=”middle|beginning|end” 分隔线显示的位置，有四种参数值：middle 每个item之间，beginning最顶端显示分隔线，end 最底端显示分隔线，none不显示间隔线。</div></pre></td></tr></table></figure>
<p>效果如下;</p>
<p><img src="http://ww2.sinaimg.cn/mw690/b0d9a523jw1fa4go9cu6kg20aq0hr0tz.gif" alt="image"></p>
<h2 id="PopupWindow"><a href="#PopupWindow" class="headerlink" title="PopupWindow"></a>PopupWindow</h2><p>PopupWindow这个控件在开发中经常用到，但V7包中还有一个PopupWindow，可以实现简单的PopupWindow的效果。<br>测试程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">public void showListPopup(View view) &#123;</div><div class="line">        String items[] = &#123;&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;, &quot;item4&quot;, &quot;item5&quot;&#125;;</div><div class="line">        final ListPopupWindow listPopupWindow = new ListPopupWindow(this);</div><div class="line"></div><div class="line">        //设置ListView类型的适配器</div><div class="line">        listPopupWindow.setAdapter(new ArrayAdapter&lt;String&gt;(ListPopupWindowActivity.this, android.R.layout.simple_list_item_1, items));</div><div class="line"></div><div class="line">        //给每个item设置监听事件</div><div class="line">        listPopupWindow.setOnItemClickListener(new AdapterView.OnItemClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) &#123;</div><div class="line">                Snackbar.make(lineContainer, &quot;the position is&quot; + position, Snackbar.LENGTH_SHORT)</div><div class="line">                        .setCallback(new Snackbar.Callback() &#123;</div><div class="line">                            @Override</div><div class="line">                            public void onDismissed(Snackbar snackbar, int event) &#123;</div><div class="line">                                super.onDismissed(snackbar, event);</div><div class="line">                                new android.os.Handler().postDelayed(new Runnable() &#123;</div><div class="line">                                    @Override</div><div class="line">                                    public void run() &#123;</div><div class="line">                                        listPopupWindow.dismiss();</div><div class="line">                                    &#125;</div><div class="line">                                &#125;, 500);</div><div class="line">                            &#125;</div><div class="line">                        &#125;)</div><div class="line">                        .show();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        //设置ListPopupWindow的锚点,也就是弹出框的位置是相对当前参数View的位置来显示，</div><div class="line">        listPopupWindow.setAnchorView(view);</div><div class="line">        //ListPopupWindow 水平偏移量</div><div class="line">        listPopupWindow.setHorizontalOffset(100);</div><div class="line">        listPopupWindow.setVerticalOffset(100);</div><div class="line">        //设置对话框的宽高</div><div class="line">        listPopupWindow.setWidth(lineContainer.getLayoutParams().width);</div><div class="line">        listPopupWindow.setHeight(600);</div><div class="line">        listPopupWindow.setModal(false);</div><div class="line">        //设置点击外边区域不可取消</div><div class="line">        listPopupWindow.setForceIgnoreOutsideTouch(true);</div><div class="line">        listPopupWindow.show();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>效果图如下：<br><img src="http://ww3.sinaimg.cn/mw690/b0d9a523jw1fa4gv2482ig20aq0hrdin.gif" alt="image"></p>
<h2 id="PopupMenu"><a href="#PopupMenu" class="headerlink" title="PopupMenu"></a>PopupMenu</h2><p>这是一个菜单式弹出框的控件，可以用这个控件来使用Menu中的文件，简单来使用一下。</p>
<p>测试程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">public void showPopupMenu(View view) &#123;</div><div class="line">        //参数View 是设置当前菜单显示的相对于View组件位置，具体位置系统会处理</div><div class="line">        PopupMenu popupMenu = new PopupMenu(this, view);</div><div class="line">        //加载menu布局</div><div class="line">        popupMenu.getMenuInflater().inflate(R.menu.menu_popmenu, popupMenu.getMenu());</div><div class="line"></div><div class="line">        //设置menu中的item点击事件</div><div class="line">        popupMenu.setOnMenuItemClickListener(new PopupMenu.OnMenuItemClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public boolean onMenuItemClick(MenuItem item) &#123;</div><div class="line">                switch (item.getItemId()) &#123;</div><div class="line">                    case R.id.share:</div><div class="line">                        Snackbar.make(line1Container, &quot;share&quot;, Snackbar.LENGTH_SHORT).show();</div><div class="line">                        break;</div><div class="line">                    case R.id.setting:</div><div class="line">                        Snackbar.make(line1Container, &quot;setting&quot;, Snackbar.LENGTH_SHORT).show();</div><div class="line">                        break;</div><div class="line">                    case R.id.cancle:</div><div class="line">                        Snackbar.make(line1Container, &quot;cancle&quot;, Snackbar.LENGTH_SHORT).show();</div><div class="line">                        break;</div><div class="line">                &#125;</div><div class="line">                return true;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        popupMenu.show();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>menu代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/share&quot;</div><div class="line">        android:icon=&quot;@mipmap/mine_login_account&quot;</div><div class="line">        android:orderInCategory=&quot;0&quot;</div><div class="line">        android:title=&quot;分享&quot;</div><div class="line">        /&gt;</div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/setting&quot;</div><div class="line">        android:icon=&quot;@mipmap/mine_login_account&quot;</div><div class="line">        android:orderInCategory=&quot;1&quot;</div><div class="line">        android:title=&quot;设置&quot;</div><div class="line">        /&gt;</div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/cancle&quot;</div><div class="line">        android:icon=&quot;@mipmap/mine_login_account&quot;</div><div class="line">        android:orderInCategory=&quot;2&quot;</div><div class="line">        android:title=&quot;取消&quot;</div><div class="line">        /&gt;</div><div class="line">&lt;/menu&gt;</div></pre></td></tr></table></figure>
<p>效果图如下：</p>
<p><img src="http://ww3.sinaimg.cn/mw690/b0d9a523jw1fa4h1ngehxg20aq0hrmzr.gif" alt="image"></p>
<h2 id="ToolBar"><a href="#ToolBar" class="headerlink" title="ToolBar"></a>ToolBar</h2><p>ToolBar是谷歌在Android5.0的时候推出的，是在V7包中，是为了替换之前的ActionBar，Toolbar的出现解决了Actionbar的各种限制，Toolbar可以完全自定义和配置，下面详细说明一下具体使用。</p>
<p>为了能在你的Activity中使用Toolbar，你必须在工程里修改styles.xml文件里的主题风格，系统默认如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;</div></pre></td></tr></table></figure>
<p>这种Theme表示使用系统之前的ActionBar，那么我们想要使用Toolbar怎么办呢？使用下面这个主题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;</div></pre></td></tr></table></figure>
<p>下面具体来说一下Toolba的使用</p>
<p>主题文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppThemeA&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;</div><div class="line">        &lt;!--导航栏底色--&gt;</div><div class="line">        &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt;</div><div class="line">        &lt;!--状态栏的颜色--&gt;</div><div class="line">        &lt;item name=&quot;colorPrimaryDark&quot;&gt;#0000ff&lt;/item&gt;</div><div class="line">        &lt;!--导航栏上的标题颜色--&gt;</div><div class="line">        &lt;item name=&quot;android:textColorPrimary&quot;&gt;#FF4081&lt;/item&gt;</div><div class="line">        &lt;!--Activity窗口的背景颜色--&gt;</div><div class="line">        &lt;item name=&quot;android:windowBackground&quot;&gt;@color/highlighted_text_material_dark&lt;/item&gt;</div><div class="line"></div><div class="line">        &lt;!--按钮选中或者点击获得焦点后的颜色--&gt;</div><div class="line">        &lt;item name=&quot;colorAccent&quot;&gt;#00ff00&lt;/item&gt;</div><div class="line">        &lt;!--和 colorAccent相反，正常状态下按钮的颜色--&gt;</div><div class="line">        &lt;item name=&quot;colorControlNormal&quot;&gt;#ff0000&lt;/item&gt;</div><div class="line">        &lt;!--Button按钮正常状态颜色--&gt;</div><div class="line">        &lt;item name=&quot;colorButtonNormal&quot;&gt;#00ff00&lt;/item&gt;</div><div class="line">        &lt;!--EditText 输入框中字体的颜色--&gt;</div><div class="line">        &lt;item name=&quot;editTextColor&quot;&gt;#00ff00&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;android:textColorHint&quot;&gt;#00ff00&lt;/item&gt;</div><div class="line">    &lt;/style&gt;</div></pre></td></tr></table></figure>
<p>manifests中使用此Style：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;activity</div><div class="line">    android:name=&quot;.ToolbarActivity&quot;</div><div class="line">    android:theme=&quot;@style/AppThemeA&quot;/&gt;</div></pre></td></tr></table></figure>
<p>布局文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line">    &lt;!--actionBarSize默认高度是56dp&amp;&amp;colorPrimary对应颜色@color/colorPrimary--&gt;</div><div class="line">    &lt;android.support.v7.widget.Toolbar</div><div class="line">        android:id=&quot;@+id/toolbar&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;?attr/actionBarSize&quot;</div><div class="line">        android:background=&quot;?attr/colorPrimary&quot;&gt;&lt;/android.support.v7.widget.Toolbar&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;CheckBox</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;男&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;CheckBox</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;男&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;RadioGroup</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;&gt;</div><div class="line"></div><div class="line">        &lt;RadioButton</div><div class="line">            android:layout_width=&quot;wrap_content&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:text=&quot;男&quot;</div><div class="line">            android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">        &lt;RadioButton</div><div class="line">            android:layout_width=&quot;wrap_content&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:text=&quot;男&quot;</div><div class="line">            android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line">    &lt;/RadioGroup&gt;</div><div class="line"></div><div class="line">    &lt;android.support.v7.widget.SwitchCompat</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;男&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;android.support.v7.widget.SwitchCompat</div><div class="line">        android:id=&quot;@+id/switchCompatBoy&quot;</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;女&quot;</div><div class="line">        android:textColor=&quot;@android:color/white&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;EditText</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:hint=&quot;请输入密码&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;Button</div><div class="line">        android:id=&quot;@+id/button&quot;</div><div class="line">        android:layout_width=&quot;wrap_content&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:text=&quot;模式切换&quot; /&gt;</div><div class="line"></div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>Res下menu文件夹中的menu文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;</div><div class="line"></div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/action_edit&quot;</div><div class="line">        android:icon=&quot;@drawable/abc_ic_menu_share_mtrl_alpha&quot;</div><div class="line">        android:orderInCategory=&quot;0&quot;</div><div class="line">        android:title=&quot;A&quot;</div><div class="line">        app:showAsAction=&quot;always&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/action_share&quot;</div><div class="line">        android:icon=&quot;@drawable/abc_ic_menu_share_mtrl_alpha&quot;</div><div class="line">        android:orderInCategory=&quot;2&quot;</div><div class="line">        android:title=&quot;B&quot;</div><div class="line">        app:showAsAction=&quot;always&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/action_settings&quot;</div><div class="line">        android:orderInCategory=&quot;3&quot;</div><div class="line">        android:title=&quot;C&quot;</div><div class="line">        app:showAsAction=&quot;never&quot; /&gt;</div><div class="line"></div><div class="line">    &lt;item</div><div class="line">        android:id=&quot;@+id/action_other&quot;</div><div class="line">        android:icon=&quot;@drawable/abc_ic_menu_share_mtrl_alpha&quot;</div><div class="line">        android:orderInCategory=&quot;4&quot;</div><div class="line">        android:title=&quot;D&quot;</div><div class="line">        app:showAsAction=&quot;never&quot; /&gt;</div><div class="line">&lt;/menu&gt;</div></pre></td></tr></table></figure>
<p>java代码中调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">public class ToolbarActivity extends AppCompatActivity implements Toolbar.OnMenuItemClickListener &#123;</div><div class="line">    Toolbar toolbar;</div><div class="line">    Button button;</div><div class="line">    SwitchCompat switchCompatBoy;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_titlebar);</div><div class="line">        button = (Button) findViewById(R.id.button);</div><div class="line">        toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        switchCompatBoy = (SwitchCompat) findViewById(R.id.switchCompatBoy);</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line">//        上面代码用来隐藏系统默认的Title。</div><div class="line">        getSupportActionBar().setDisplayShowTitleEnabled(false);</div><div class="line">        toolbar.setTitle(&quot;主标题&quot;);</div><div class="line">        toolbar.setSubtitle(&quot;副标题&quot;);</div><div class="line">        toolbar.setSubtitleTextColor(getResources().getColor(R.color.colorAccent));</div><div class="line">        toolbar.setLogo(R.mipmap.mine_login_account);</div><div class="line">        toolbar.setNavigationIcon(android.R.drawable.ic_notification_clear_all);</div><div class="line">        toolbar.setNavigationOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View view) &#123;</div><div class="line">                finish();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        toolbar.setOnMenuItemClickListener(this);</div><div class="line"></div><div class="line">        button.setOnClickListener(new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View view) &#123;</div><div class="line">                Toast.makeText(ToolbarActivity.this, &quot;aaa&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        switchCompatBoy.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onCheckedChanged(CompoundButton compoundButton, boolean b) &#123;</div><div class="line">                if (b) &#123;</div><div class="line">                    Toast.makeText(ToolbarActivity.this, &quot;checked&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                &#125; else &#123;</div><div class="line">                    Toast.makeText(ToolbarActivity.this, &quot;no checked&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean onCreateOptionsMenu(Menu menu) &#123;</div><div class="line">        getMenuInflater().inflate(R.menu.menu_titlebar, menu);</div><div class="line">        return super.onCreateOptionsMenu(menu);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean onMenuItemClick(MenuItem item) &#123;</div><div class="line">        switch (item.getItemId()) &#123;</div><div class="line">            case R.id.action_edit:</div><div class="line">                Toast.makeText(ToolbarActivity.this, &quot;查找按钮&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                break;</div><div class="line">            case R.id.action_share:</div><div class="line">                Toast.makeText(ToolbarActivity.this, &quot;分享按钮&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">                break;</div><div class="line">        &#125;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>效果如下：</p>
<p><img src="http://ww2.sinaimg.cn/mw690/b0d9a523jw1fa4i8s8owig20aq0hrh2s.gif" alt="image"></p>
<p>上面就是程序部分，里面有很清楚的注释，Toolbar可以自定义，这个在新建的带侧边栏的Activity中就有，这里不多说明，这里以一张图片来说明上面为什么是这种效果。<br><img src="http://img.blog.csdn.net/20150611165509495" alt="image"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">1. colorPrimary: Toolbar导航栏的底色。 </div><div class="line">1. colorPrimaryDark：状态栏的底色，注意这里只支持Android5.0以上的手机。 </div><div class="line">1. textColorPrimary：整个当前Activity的字体的默认颜色。 </div><div class="line">1. android:windowBackground：当前Activity的窗体颜色。 </div><div class="line">1. colorAccent：CheckBox，RadioButton，SwitchCompat等控件的点击选中颜色 </div><div class="line">1. colorControlNormal：CheckBox，RadioButton，SwitchCompat等默认状态的颜色。 </div><div class="line">1. colorButtonNormal：默认状态下Button按钮的颜色。 </div><div class="line">1. editTextColor：默认EditView输入框字体的颜色。</div></pre></td></tr></table></figure>
<p>参考文章链接：<a href="http://blog.csdn.net/feiduclear_up/article/details/46457433" target="_blank" rel="external">http://blog.csdn.net/feiduclear_up/article/details/46457433</a></p>
<h2 id="TabLayout-选项卡布局"><a href="#TabLayout-选项卡布局" class="headerlink" title="TabLayout(选项卡布局)"></a>TabLayout(选项卡布局)</h2><p>实现Tabs选项卡的效果有很多方法，例如，我一般使用PageSlidingTab来完成，但是，现在谷歌中有一个TabLayout，我们以后直接就可以使用此布局来直接完成选项卡的效果，不管是使用自定义的View还是使用谷歌给的TabLayout，他们都是继承自HorizontalScrollView的。</p>
<p>先看一下效果：<br><img src="http://ww1.sinaimg.cn/mw690/b0d9a523jw1fa7musle38g20ah0hbgps.gif" alt="image"></p>
<p>布局activity_tablayout.xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.TabLayout</div><div class="line">        android:id=&quot;@+id/tab&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;40dp&quot;</div><div class="line">        app:tabBackground=&quot;@color/colorAccent&quot;</div><div class="line">        app:tabIndicatorColor=&quot;@android:color/holo_blue_bright&quot;</div><div class="line">        app:tabMode=&quot;scrollable&quot;</div><div class="line">        app:tabSelectedTextColor=&quot;@android:color/holo_blue_bright&quot;</div><div class="line">        app:tabTextColor=&quot;@android:color/white&quot;</div><div class="line">        &gt;&lt;/android.support.design.widget.TabLayout&gt;</div><div class="line"></div><div class="line">    &lt;android.support.v4.view.ViewPager</div><div class="line">        android:id=&quot;@+id/vpContent&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;&gt;&lt;/android.support.v4.view.ViewPager&gt;</div><div class="line">&lt;/LinearLayout&gt;</div></pre></td></tr></table></figure>
<p>布局文件很简单，只有TabLayout和ViewPager两个控件，但在使用TabLayout的属性的时候，需要引入命名空间 xmlns:app=”<a href="http://schemas.android.com/apk/res-auto&quot;。" target="_blank" rel="external">http://schemas.android.com/apk/res-auto&quot;。</a></p>
<p>Adapter代码TabFragmentAdapter.java：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">public class TabFragmentAdapter extends FragmentStatePagerAdapter &#123;</div><div class="line"></div><div class="line">    private List&lt;Fragment&gt; mFragments;</div><div class="line">    private List&lt;String&gt; mTitles;</div><div class="line"></div><div class="line">    public TabFragmentAdapter(FragmentManager fm,List&lt;Fragment&gt; mFragments,List&lt;String&gt; mTitles) &#123;</div><div class="line">        super(fm);</div><div class="line">        this.mFragments = mFragments;</div><div class="line">        this.mTitles = mTitles;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public Fragment getItem(int position) &#123;</div><div class="line">        return mFragments.get(position);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getCount() &#123;</div><div class="line">        return mFragments.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public CharSequence getPageTitle(int position) &#123;</div><div class="line">        return mTitles.get(position);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主程序TabLayoutActivity.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">public class TabLayoutActivity extends AppCompatActivity &#123;</div><div class="line"></div><div class="line">    TabLayout tab;</div><div class="line">    ViewPager vpContent;</div><div class="line">    List&lt;Fragment&gt; fragmentList;</div><div class="line">    List&lt;String&gt; mTitles;</div><div class="line">    TabFragmentAdapter mTabFragmentAdapter;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_tablayout);</div><div class="line">        tab = (TabLayout) findViewById(R.id.tab);</div><div class="line"></div><div class="line">        vpContent = (ViewPager) findViewById(R.id.vpContent);</div><div class="line">        fragmentList = new ArrayList&lt;&gt;();</div><div class="line">        mTitles = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">        mTitles.add(&quot;one&quot;);</div><div class="line">        mTitles.add(&quot;two&quot;);</div><div class="line">        mTitles.add(&quot;three&quot;);</div><div class="line">        mTitles.add(&quot;four&quot;);</div><div class="line">        mTitles.add(&quot;five&quot;);</div><div class="line">        mTitles.add(&quot;six&quot;);</div><div class="line">        mTitles.add(&quot;severn&quot;);</div><div class="line">        mTitles.add(&quot;eight&quot;);</div><div class="line">        mTitles.add(&quot;night&quot;);</div><div class="line">        mTitles.add(&quot;ten&quot;);</div><div class="line"></div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(0)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(1)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(2)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(3)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(4)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(5)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(6)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(7)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(8)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(9)));</div><div class="line">        for (int i = 0; i &lt; mTitles.size(); i++) &#123;</div><div class="line">            fragmentList.add(TabFragment.newInstance(&quot;hello &quot; + mTitles.get(i)));</div><div class="line">        &#125;</div><div class="line">        mTabFragmentAdapter = new TabFragmentAdapter(getSupportFragmentManager(), fragmentList, mTitles);</div><div class="line">        vpContent.setAdapter(mTabFragmentAdapter);</div><div class="line">        tab.setupWithViewPager(vpContent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主程序中用到的TabFragment.java程序就非常简单了，通过效果图就知道怎么做了，这里就不多说明了。</p>
<h5 id="说明："><a href="#说明：" class="headerlink" title="-说明："></a>-说明：</h5><p>TabLayout常用的属性有：</p>
<ol>
<li>app:tabSelectedTextColor：Tab被选中字体的颜色</li>
<li>app:tabTextColor：Tab未被选中字体的颜色</li>
<li>app:tabIndicatorColor：Tab指示器下标的颜色</li>
</ol>
<p>TabLayout常用的方法如下： </p>
<ul>
<li>addTab(TabLayout.Tab tab, int position, boolean setSelected) 增加选项卡到 layout 中 </li>
<li>addTab(TabLayout.Tab tab, boolean setSelected) 同上 </li>
<li>addTab(TabLayout.Tab tab) 同上 </li>
<li>getTabAt(int index) 得到选项卡 </li>
<li>getTabCount() 得到选项卡的总个数 </li>
<li>getTabGravity() 得到 tab 的 Gravity </li>
<li>getTabMode() 得到 tab 的模式 </li>
<li>getTabTextColors() 得到 tab 中文本的颜色 </li>
<li>newTab() 新建个 tab </li>
<li>removeAllTabs() 移除所有的 tab </li>
<li>removeTab(TabLayout.Tab tab) 移除指定的 tab </li>
<li>removeTabAt(int position) 移除指定位置的 tab </li>
<li>setOnTabSelectedListener(TabLayout.OnTabSelectedListener onTabSelectedListener) 为每个 tab 增加选择监听器 </li>
<li>setScrollPosition(int position, float positionOffset, boolean updateSelectedText) 设置滚动位置 </li>
<li>setTabGravity(int gravity) 设置 Gravity </li>
<li>setTabMode(int mode) 设置 Mode,有两种值：TabLayout.MODE_SCROLLABLE和TabLayout.MODE_FIXED分别表示当tab的内容超过屏幕宽度是否支持横向水平滑动，第一种支持滑动，第二种不支持，默认不支持水平滑动。 </li>
<li>setTabTextColors(ColorStateList textColor) 设置 tab 中文本的颜色 </li>
<li>setTabTextColors(int normalColor, int selectedColor) 设置 tab 中文本的颜色 默认 选中 </li>
<li>setTabsFromPagerAdapter(PagerAdapter adapter) 设置 PagerAdapter </li>
<li>setupWithViewPager(ViewPager viewPager) 和 ViewPager 联动 </li>
</ul>
<p><strong>最后要强调的是，TabLayout要配合Theme.AppCompat。。。。。。来使用，否则会报错的哦，不明白的可以试一下</strong></p>
<h2 id="AppBarLayout（程序栏布局）-amp-amp-CoordinatorLayout（协作布局）"><a href="#AppBarLayout（程序栏布局）-amp-amp-CoordinatorLayout（协作布局）" class="headerlink" title="AppBarLayout（程序栏布局）&amp;&amp;CoordinatorLayout（协作布局）"></a>AppBarLayout（程序栏布局）&amp;&amp;CoordinatorLayout（协作布局）</h2><p>AppBarLayout继承自LinearLayout，它是为了Material Design设计的App Bar，支持手势滑动操作，默认的AppBarLayout是<strong>垂直方向</strong>的，它的作用是把AppBarLayout包裹的内容都作为AppBar，AppBarLayout是支持手势滑动效果的，不过要跟CoordinatorLayout配合使用。</p>
<p>从源码可以看到，CoordinatorLayout是一个增强型的FrameLayout。它的作用有两个：</p>
<ol>
<li>作为一个布局的根布局</li>
<li>作为一个子视图之间相互协调手势效果的一个协调布局</li>
</ol>
<p>首先来看布局文件layout_appbar.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:id=&quot;@+id/coor_main&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.AppBarLayout</div><div class="line">        android:id=&quot;@+id/appbar&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;&gt;</div><div class="line"></div><div class="line">        &lt;android.support.v7.widget.Toolbar</div><div class="line">            android:id=&quot;@+id/toolbar&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;?attr/actionBarSize&quot;</div><div class="line">            android:background=&quot;?attr/colorPrimary&quot;</div><div class="line">            app:layout_scrollFlags=&quot;scroll|enterAlways&quot;&gt;</div><div class="line"></div><div class="line">        &lt;/android.support.v7.widget.Toolbar&gt;</div><div class="line"></div><div class="line">        &lt;android.support.design.widget.TabLayout</div><div class="line">            android:id=&quot;@+id/tabs&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            app:tabGravity=&quot;fill&quot;</div><div class="line">            app:tabIndicatorColor=&quot;@color/colorAccent&quot;</div><div class="line">            app:tabSelectedTextColor=&quot;@color/colorAccent&quot;</div><div class="line">            app:tabTextColor=&quot;@color/colorPrimary&quot;&gt;&lt;/android.support.design.widget.TabLayout&gt;</div><div class="line"></div><div class="line">    &lt;/android.support.design.widget.AppBarLayout&gt;</div><div class="line">    &lt;!--可滑动的布局内容--&gt;</div><div class="line">    &lt;android.support.v4.view.ViewPager</div><div class="line">        android:id=&quot;@+id/vpContent&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;match_parent&quot;</div><div class="line">        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot; /&gt;</div><div class="line">&lt;/android.support.design.widget.CoordinatorLayout&gt;</div></pre></td></tr></table></figure>
<p>说明：</p>
<p>CoordinatorLayout协调布局中包裹了两个布局，一个是ViewPager，一个是AppBarLayout</p>
<p>我们来看看CoordinatorLayout是怎么来协调这两个子视图手势操作的:</p>
<p>1.由于CoordinatorLayout是FrameLayout布局，我们可以通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">android:layout_gravity=&quot;bottom|end&quot;</div></pre></td></tr></table></figure>
<p>属性来控制组件在整个布局中的位置。</p>
<p>2.为了达到上面效果图的手势动画效果，我们必须做如下设置，通过app:layout_scrollFlags=”scroll|enterAlways” 属性来确定哪个组件是可滑动的</p>
<p>设置的layout_scrollFlags有如下几种选项：</p>
<ol>
<li>scroll: 所有想滚动出屏幕的view都需要设置这个flag- 没有设置这个flag的view将被固定在屏幕顶部。</li>
<li>enterAlways: 这个flag让任意向下的滚动都会导致该view变为可见，启用快速“返回模式”。</li>
<li>enterAlwaysCollapsed: 当你的视图已经设置minHeight属性又使用此标志时，你的视图只能已最小高度进入，只有当滚动视图到达顶部时才扩大到完整高度。</li>
<li>exitUntilCollapsed: 滚动退出屏幕，最后折叠在顶端。</li>
</ol>
<p>我们上面的布局中 给Toolbar设置了app:layout_scrollFlags属性，因此，Toolbar是可以滚动出屏幕，且向下滚动有可以出现。</p>
<p>3.为了使得Toolbar可以滑动，我们必须还得有个条件，就是CoordinatorLayout布局下包裹一个可以滑动的布局，比如 RecyclerView，NestedScrollView(经过测试，ListView，ScrollView不支持)具有滑动效果的组件。并且给这些组件设置如下属性来告诉CoordinatorLayout，该组件是带有滑动行为的组件，然后CoordinatorLayout在接受到滑动时会通知AppBarLayout 中可滑动的Toolbar可以滑出屏幕了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;</div></pre></td></tr></table></figure>
<p>4.实际开发中发现一个问题，当AppBarLayout的高度太高的时，滑动也是有问题的，不懂的码友可以试试。</p>
<p>主程序：AppBarLayoutActivity.java：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">public class AppBarLayoutActivity extends AppCompatActivity &#123;</div><div class="line"></div><div class="line">    private CoordinatorLayout coor_main;</div><div class="line">    private AppBarLayout appbar;</div><div class="line">    private Toolbar toolbar;</div><div class="line">    private TabLayout tab;</div><div class="line">    private ViewPager vpContent;</div><div class="line">    List&lt;Fragment&gt; fragmentList;</div><div class="line">    List&lt;String&gt; mTitles;</div><div class="line">    TabFragmentAdapter mTabFragmentAdapter;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.layout_appbar);</div><div class="line">        coor_main = (CoordinatorLayout) findViewById(R.id.coor_main);</div><div class="line">        appbar = ((AppBarLayout) findViewById(R.id.appbar));</div><div class="line">        toolbar = ((Toolbar) findViewById(R.id.toolbar));</div><div class="line">        tab = ((TabLayout) findViewById(R.id.tabs));</div><div class="line">        vpContent = ((ViewPager) findViewById(R.id.vpContent));</div><div class="line">        initToolBar();</div><div class="line">        initTab();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void initToolBar() &#123;</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line">        getSupportActionBar().setDisplayShowTitleEnabled(false);</div><div class="line">        toolbar.setTitle(&quot;风清扬&quot;);</div><div class="line">        toolbar.setLogo(R.mipmap.ic_launcher);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void initTab() &#123;</div><div class="line">        fragmentList = new ArrayList&lt;&gt;();</div><div class="line">        mTitles = new ArrayList&lt;&gt;();</div><div class="line"></div><div class="line">        mTitles.add(&quot;one&quot;);</div><div class="line">        mTitles.add(&quot;two&quot;);</div><div class="line">        mTitles.add(&quot;three&quot;);</div><div class="line">        mTitles.add(&quot;four&quot;);</div><div class="line"></div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(0)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(1)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(2)));</div><div class="line">        tab.addTab(tab.newTab().setText(mTitles.get(3)));</div><div class="line">        for (int i = 0; i &lt; mTitles.size(); i++) &#123;</div><div class="line">            fragmentList.add(AppBarFragment.newInstance(&quot;&quot;+i));</div><div class="line">        &#125;</div><div class="line">        mTabFragmentAdapter = new TabFragmentAdapter(getSupportFragmentManager(), fragmentList, mTitles);</div><div class="line">        vpContent.setAdapter(mTabFragmentAdapter);</div><div class="line">        tab.setupWithViewPager(vpContent);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>说明：<br>因为用到了ToolBar，所以需要去掉APP中默认的ActionBar，即需要给此Activity添加theme，如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppThemeB&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;&lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p>里面别的代码都比较简单，将会在下面奉上源代码。</p>
<p><strong>总结</strong>： 为了使得Toolbar有滑动效果，必须做到如下三点：</p>
<ol>
<li>CoordinatorLayout必须作为整个布局的父布局容器。</li>
<li>给需要滑动的组件设置 app:layout_scrollFlags=”scroll|enterAlways” 属性。</li>
<li>给你的可滑动的组件，也就是RecyclerView 或者 NestedScrollView 设置如下属性：<br>app:layout_behavior=”@string/appbar_scrolling_view_behavior”</li>
</ol>
<h2 id="CollapsingToolbarLayout（折叠工具栏布局）"><a href="#CollapsingToolbarLayout（折叠工具栏布局）" class="headerlink" title="CollapsingToolbarLayout（折叠工具栏布局）"></a>CollapsingToolbarLayout（折叠工具栏布局）</h2><p>CollapsingToolbarLayout包裹 Toolbar 的时候提供一个可折叠的 Toolbar，一般作为AppbarLayout的子视图使用。</p>
<p>效果如下：<br><img src="http://ww3.sinaimg.cn/mw690/b0d9a523jw1fa7ypvd0trg20ah0hbdtb.gif" alt="image"></p>
<p>布局文件activity_collapsing.xml:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">    &lt;android.support.design.widget.AppBarLayout</div><div class="line">        android:id=&quot;@+id/appbar&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;160dp&quot;&gt;</div><div class="line"></div><div class="line">        &lt;android.support.design.widget.CollapsingToolbarLayout</div><div class="line">            android:id=&quot;@+id/collapsing_toolbar&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;match_parent&quot;</div><div class="line">            app:contentScrim=&quot;?attr/colorPrimary&quot;</div><div class="line">            app:expandedTitleMarginEnd=&quot;64dp&quot;</div><div class="line">            app:expandedTitleMarginStart=&quot;48dp&quot;</div><div class="line">            app:layout_scrollFlags=&quot;scroll|exitUntilCollapsed&quot;</div><div class="line">            app:statusBarScrim=&quot;?attr/colorPrimary&quot;</div><div class="line"></div><div class="line">            &gt;</div><div class="line"></div><div class="line">            &lt;ImageView</div><div class="line">                android:id=&quot;@+id/image&quot;</div><div class="line">                android:layout_width=&quot;match_parent&quot;</div><div class="line">                android:layout_height=&quot;match_parent&quot;</div><div class="line">                android:scaleType=&quot;fitXY&quot;</div><div class="line">                android:src=&quot;@mipmap/html5&quot;</div><div class="line">                app:layout_collapseMode=&quot;parallax&quot;</div><div class="line">                app:layout_collapseParallaxMultiplier=&quot;0.6&quot; /&gt;</div><div class="line"></div><div class="line">            &lt;android.support.v7.widget.Toolbar</div><div class="line">                android:id=&quot;@+id/toolbar&quot;</div><div class="line">                android:layout_width=&quot;match_parent&quot;</div><div class="line">                android:layout_height=&quot;?attr/actionBarSize&quot;</div><div class="line">                app:layout_collapseMode=&quot;pin&quot;</div><div class="line">                &gt;</div><div class="line">                &lt;TextView</div><div class="line">                    android:layout_width=&quot;match_parent&quot;</div><div class="line">                    android:layout_height=&quot;match_parent&quot;</div><div class="line">                    android:gravity=&quot;left|center_vertical&quot;</div><div class="line">                    android:textColor=&quot;#ffffff&quot;</div><div class="line">                    android:text=&quot;自定义标题&quot;</div><div class="line"></div><div class="line">                    /&gt;</div><div class="line">            &lt;/android.support.v7.widget.Toolbar&gt;</div><div class="line">        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;</div><div class="line">    &lt;/android.support.design.widget.AppBarLayout&gt;</div><div class="line"></div><div class="line">    &lt;!--可滑动的内容--&gt;</div><div class="line">    &lt;android.support.v4.widget.NestedScrollView</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;match_parent&quot;</div><div class="line">            android:orientation=&quot;vertical&quot;&gt;</div><div class="line"></div><div class="line">            &lt;Button</div><div class="line">                android:layout_width=&quot;match_parent&quot;</div><div class="line">                android:layout_height=&quot;match_parent&quot;</div><div class="line">                android:layout_margin=&quot;5dp&quot;</div><div class="line">                android:text=&quot;one&quot; /&gt;</div><div class="line"></div><div class="line">        ......若干个button......</div><div class="line"></div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line">    &lt;/android.support.v4.widget.NestedScrollView&gt;</div><div class="line">&lt;/android.support.design.widget.CoordinatorLayout&gt;</div></pre></td></tr></table></figure>
<p>主程序CollapsingToolbarLayoutActivity.java：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">public class CollapsingToolbarLayoutActivity extends AppCompatActivity &#123;</div><div class="line">    private Toolbar toolbar;</div><div class="line">    private CollapsingToolbarLayout collapsingToolbar;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_collapsing);</div><div class="line">        toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        setSupportActionBar(toolbar);</div><div class="line">        getSupportActionBar().setDisplayShowTitleEnabled(false);</div><div class="line">        getSupportActionBar().setDisplayHomeAsUpEnabled(true);</div><div class="line">        collapsingToolbar = (CollapsingToolbarLayout) findViewById(R.id.collapsing_toolbar);</div><div class="line">//        collapsingToolbar.setTitle(&quot;bruce常&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean onOptionsItemSelected(MenuItem item) &#123;</div><div class="line">        if (item.getItemId() == android.R.id.home) &#123;</div><div class="line"></div><div class="line">            Toast.makeText(this, &quot;aaa&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">        return super.onOptionsItemSelected(item);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>说明：</p>
<p>CollapsingToolbarLayout 提供以下属性和方法是用：</p>
<ol>
<li>Collapsing title：ToolBar的标题，当CollapsingToolbarLayout全屏没有折叠时，title显示的是大字体，在折叠的过程中，title不断变小到一定大小的效果。你可以调用setTitle(CharSequence)方法设置title。</li>
<li>Content scrim：ToolBar被折叠到顶部固定时候的背景，你可以调用setContentScrim(Drawable)方法改变背景或者 在属性中使用 app:contentScrim=”?attr/colorPrimary”来改变背景。</li>
<li>Status bar scrim：状态栏的背景，调用方法setStatusBarScrim(Drawable)。还没研究明白，不过这个只能在Android5.0以上系统有效果。</li>
<li>Parallax scrolling children：CollapsingToolbarLayout滑动时，子视图的视觉差，可以通过属性app:layout_collapseParallaxMultiplier=”0.6”改变。</li>
<li>CollapseMode ：子视图的折叠模式，有两种“pin”：固定模式，在折叠的时候最后固定在顶端；“parallax”：视差模式，在折叠的时候会有个视差折叠的效果。我们可以在布局中使用属性app:layout_collapseMode=”parallax”来改变。</li>
</ol>
<p>特别注意的是要使用NoActionBar的主题，且AppBarLayout的布局超过手机屏幕的时候，滑动也是有问题的。 </p>
<h2 id="NestedScrollView的使用"><a href="#NestedScrollView的使用" class="headerlink" title="NestedScrollView的使用:"></a>NestedScrollView的使用:</h2><p>NestedScrollView是support-v4包提供的控件,继承至FrameLayout,<br>并实现了NestedScrollingParent,NestedScrollingChild, ScrollingView接口.<br>它的作用类似于Android.widget.ScrollView,不同点在于NestedScrollView支持嵌套滑动.</p>
<p>效果图如下：</p>
<p><img src="http://ww1.sinaimg.cn/mw690/b0d9a523jw1fa7yqvx1fug20ah0hbk3t.gif" alt="image"></p>
<p>布局文件activity_netscroll.xml：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</div><div class="line">&lt;android.support.design.widget.CoordinatorLayout</div><div class="line">    android:id=&quot;@+id/main_content&quot;</div><div class="line">    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</div><div class="line">    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</div><div class="line">    xmlns:tools=&quot;http://schemas.android.com/tools&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    tools:context=&quot;.NestedScrollViewActivity&quot;&gt;</div><div class="line"></div><div class="line"></div><div class="line">    &lt;android.support.design.widget.AppBarLayout</div><div class="line">        android:id=&quot;@+id/appbar&quot;</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;&gt;</div><div class="line">        &lt;!--标题栏--&gt;</div><div class="line">        &lt;android.support.v7.widget.Toolbar</div><div class="line">            android:id=&quot;@+id/toolbar&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;?attr/actionBarSize&quot;</div><div class="line">            android:background=&quot;?attr/colorPrimary&quot;</div><div class="line">            app:layout_scrollFlags=&quot;scroll|enterAlways&quot;&gt;</div><div class="line"></div><div class="line">            &lt;TextView</div><div class="line">                android:layout_width=&quot;wrap_content&quot;</div><div class="line">                android:layout_height=&quot;match_parent&quot;</div><div class="line">                android:layout_gravity=&quot;center&quot;</div><div class="line">                android:gravity=&quot;center&quot;</div><div class="line">                android:text=&quot;自定义标题&quot;/&gt;</div><div class="line">        &lt;/android.support.v7.widget.Toolbar&gt;</div><div class="line">        &lt;!--大图--&gt;</div><div class="line">        &lt;ImageView</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;200dp&quot;</div><div class="line">            android:background=&quot;@mipmap/html5&quot;</div><div class="line"></div><div class="line">            /&gt;</div><div class="line">        &lt;!--选项卡--&gt;</div><div class="line">        &lt;android.support.design.widget.TabLayout</div><div class="line">            android:id=&quot;@+id/tabLayout&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:background=&quot;#80ffffff&quot;</div><div class="line">            app:tabIndicatorColor=&quot;@color/colorAccent&quot;</div><div class="line">            app:tabMode=&quot;scrollable&quot;</div><div class="line">            app:tabSelectedTextColor=&quot;@color/colorAccent&quot;</div><div class="line">            app:tabTextColor=&quot;@android:color/black&quot;/&gt;</div><div class="line">    &lt;/android.support.design.widget.AppBarLayout&gt;</div><div class="line"></div><div class="line">    &lt;android.support.v4.widget.NestedScrollView</div><div class="line">        android:layout_width=&quot;match_parent&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:overScrollMode=&quot;never&quot;</div><div class="line">        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;</div><div class="line"></div><div class="line">        &lt;LinearLayout</div><div class="line">            android:id=&quot;@+id/ll_sc_content&quot;</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;wrap_content&quot;</div><div class="line">            android:orientation=&quot;vertical&quot;&gt;</div><div class="line">        &lt;/LinearLayout&gt;</div><div class="line">    &lt;/android.support.v4.widget.NestedScrollView&gt;</div><div class="line">&lt;/android.support.design.widget.CoordinatorLayout&gt;</div></pre></td></tr></table></figure>
<p>主程序NestedScrollViewActivity.java：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">public class NestedScrollViewActivity extends AppCompatActivity &#123;</div><div class="line">    List&lt;String&gt; mData;</div><div class="line">    @Override</div><div class="line">    protected void onCreate(@Nullable Bundle savedInstanceState) &#123;</div><div class="line">        super.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_netscroll);</div><div class="line">        initData(1);</div><div class="line">        initView();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void initData(int pager) &#123;</div><div class="line">        mData = new ArrayList&lt;&gt;();</div><div class="line">        for (int i = 1; i &lt; 50; i++) &#123;</div><div class="line">            mData.add(&quot;pager&quot; + pager + &quot; 第&quot; + i + &quot;个item&quot;);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void initView() &#123;</div><div class="line">        //设置ToolBar</div><div class="line">        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);</div><div class="line">        toolbar.setTitle(&quot;&quot;);</div><div class="line">        toolbar.setNavigationIcon(R.mipmap.ic_launcher);</div><div class="line">        setSupportActionBar(toolbar);//替换系统的actionBar</div><div class="line"></div><div class="line">        //设置TabLayout</div><div class="line">        TabLayout tabLayout = (TabLayout) findViewById(R.id.tabLayout);</div><div class="line">        for (int i = 1; i &lt; 20; i++) &#123;</div><div class="line">            tabLayout.addTab(tabLayout.newTab().setText(&quot;TAB&quot; + i));</div><div class="line">        &#125;</div><div class="line">        //TabLayout的切换监听</div><div class="line">        tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onTabSelected(TabLayout.Tab tab) &#123;</div><div class="line">                initData(tab.getPosition() + 1);</div><div class="line">                setScrollViewContent();</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onTabUnselected(TabLayout.Tab tab) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onTabReselected(TabLayout.Tab tab) &#123;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        setScrollViewContent();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 刷新ScrollView的内容</div><div class="line">     */</div><div class="line">    private void setScrollViewContent() &#123;</div><div class="line">        //NestedScrollView下的LinearLayout</div><div class="line">        LinearLayout layout = (LinearLayout) findViewById(R.id.ll_sc_content);</div><div class="line">        layout.removeAllViews();</div><div class="line">        for (int i = 0; i &lt; mData.size(); i++) &#123;</div><div class="line">            View view = View.inflate(NestedScrollViewActivity.this, R.layout.adapter_appbar, null);</div><div class="line">            ((TextView) view.findViewById(R.id.text)).setText(mData.get(i));</div><div class="line">            //动态添加 子View</div><div class="line">            layout.addView(view, i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>5.0中的新特性基本上就这么多，希望以后开发中多多使用。</p>
<p>本篇文章源码下载地址：<a href="https://github.com/201216323/Test5.0" target="_blank" rel="external">点我</a></p>
<p>欢迎访问201216323.tech来查看我的CSDN博客。</p>
<p>欢迎关注我的个人技术公众号,快速查看我的最新文章。</p>
<p><img src="http://img.blog.csdn.net/20161220174646569?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvY2NnXzIwMTIxNjMyMw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="我的公众号图片" title="bruce常"></p>
<p>参考链接：</p>
<ol>
<li><a href="http://blog.csdn.net/feiduclear_up/article/details/46514791" target="_blank" rel="external">http://blog.csdn.net/feiduclear_up/article/details/46514791</a></li>
<li><a href="http://blog.csdn.net/mchenys/article/details/51541306" target="_blank" rel="external">http://blog.csdn.net/mchenys/article/details/51541306</a></li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://201216323.tech/2017/09/05/2：Android5-0中Material-Dialog、SwipeRefreshLayout等控件的使用。/" data-id="cj77ly8i6000os8sge8hsvzvr" class="article-share-link">分享</a><div class="tags"><a href="/tags/Android/">Android</a></div><div class="post-nav"><a href="/2017/09/05/网络爬虫技术Jsoup——爬到一切你想要的/" class="pre">网络爬虫技术Jsoup——爬到一切你想要的</a><a href="/2017/09/05/1：Android5-0中TextInputLayout和Snackbar的使用。/" class="next"> 1：Android5.0中TextInputLayout和Snackbar的使用。</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://201216323.tech"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Html5/" style="font-size: 15px;">Html5</a> <a href="/tags/友盟/" style="font-size: 15px;">友盟</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L04JavaScript基础教程2/">L04JavaScript基础教程2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L04JavaScript基础教程1/">L04JavaScript基础教程1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L03HTML5学习视频CSS3基础/">L03HTML5学习视频CSS3基础</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L02HTML5基础02/">L02HTML5基础02</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L02HTML5基础01/">L02HTML5基础01</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/L01HTML5开发前准备/">L01HTML5开发前准备</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/友盟统计的一次详细分析，记录自己深入阅读统计的过程/">友盟统计的一次详细分析，记录自己深入阅读统计的过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/Android倒计时效果/">Android倒计时效果</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/经受时间沉淀的15-个-Android-通用流行框架大全/">经受时间沉淀的15 个 Android 通用流行框架大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/05/网络爬虫技术Jsoup——爬到一切你想要的/">网络爬虫技术Jsoup——爬到一切你想要的</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">常灿光个人博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>